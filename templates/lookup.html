{% extends "layout.html" %}

{% block content %}
<h2>Lookup Stat Blocks</h2>

<div class="row g-3 mb-3">
  <div class="col-md-3">
    <label class="form-label">Category</label>
    <select id="category" class="form-select">
      <option value="">Any</option>
      {% for cat in categories.keys() %}
      <option value="{{cat}}">{{cat}}</option>
      {% endfor %}
    </select>
  </div>
  <div class="col-md-2">
    <label class="form-label">Tier</label>
    <select id="tier" class="form-select">
      <option value="">Any</option>
      {% for t in tiers %}
      <option value="{{t}}">{{t}}</option>
      {% endfor %}
    </select>
  </div>
  <div class="col-md-3">
    <label class="form-label">Type</label>
    <select id="type" class="form-select">
      <option value="">Any</option>
    </select>
  </div>
  <div class="col-md-4">
    <label class="form-label">Text search</label>
    <div class="input-group">
      <input id="text" class="form-control" placeholder="Search name, description, features...">
      <button id="searchBtn" class="btn btn-primary">Search</button>
    </div>
  </div>
</div>

<label class="form-label">Search Results</label>
<div id="results" class="p-2 mb-3"></div>

<h3 class="mt-4">Selected Stat Block Details</h3>
<div class="row">
  <div class="col-md-6">
    <label class="form-label">Formatted</label>
    <div id="formatted" class="form-control" style="height: 240px;overflow-y: auto;overflow-x: auto;white-space: pre-wrap;background-color: #f4f0e5;padding: 8px;border-width: 1px;"></div>
  </div>
  <div class="col-md-6">
    <label class="form-label">JSON</label>
    <textarea id="formattedJson" class="form-control" rows="10" readonly></textarea>
  </div>
</div>

<h3 class="mt-4">Re-Tier Statblock</h3>
<div class="row g-3 align-items-end mb-3">
    <div class="col-md-2">
        <label for="retier-tier" class="form-label">New Tier</label>
        <select id="retier-tier" class="form-select">
            {% for t in tiers %}
            <option value="{{t}}">{{t}}</option>
            {% endfor %}
        </select>
    </div>
    <div class="col-md-3">
        <button id="retierBtn" class="btn btn-secondary">Re-Tier</button>
    </div>
</div>

<script>
// initial wiring handled in static/main.js
</script>

{% endblock %}
